---
title: "Part_2_Frog_Species"
author: "Heyue WU_u7628175"
date: "15/09/2023"
output:  
    html_document:
        toc: true
        toc_depth: 4
        theme: cosmo
        number_sections: false
        toc_float: true
        highlight: pygments
        fig_width: 8
        fig_height: 4
---

# Location on GitHub

https://github.com/AdriaWu/DS4B-short-report-1//blob/main/DS4B-short-report-1/Part_2_Frog_Species.Rmd

## 1. Loading the data and preparing for the packages

```{r}
# Load necessary R packages
library(tidyverse)
library(ggplot2)
library(readxl)
library(dplyr)
library(lubridate)

# Read data from Excel file
data_2 <- read_csv("raw_data/FrogID4_final_dataset.csv")

# have a quick view of the data
tibble(data_2)

# Check the type of value
summary(data_2)
```

## 2. Data Cleaning and Preliminary Analysis

The next step is to identify any anomalies, inconsistencies, or missing values.

```{r}
# Check for missing values and use the `summarise_all()` to summarize or calculate all columns in a data frame
data_2 |>
  summarise_all(~sum(is.na(.)))
```
This means that all rows of these columns have valid data, with no missing values. Then let's check for duplicates.

```{r}
# use the `duplicated()` function to identify and count duplicate rows.
sum(duplicated(data_2))
```
So there are no duplicate rows in the data_2. 

Before diving into any analysis or visualization, we can make a summary of the dataset to provide a quick snapshot of key features for the data, which might help the readers who are unfamiliar with the dataset.

```{r}
# Number of unique species
unique_species <- length(unique(data_2$scientificName))

# Get range of dates

# First, the original date data is in character format, and we can just find the start date and end date.
start_Date <- as.character(min(data_2$eventDate))
end_Date <- as.character(max(data_2$eventDate))

# Next, convert the `eventDate` column into standardized Date objects and create a new column to store them, ensuring consistency across the dataset and better visualization later.
data_2$Date_Object <- as.Date(data_2$eventDate, format="%Y/%m/%d")
date_range <- range(as.Date(data_2$Date_Object))

# Distribution of recordings across states
state_distribution <- table(data_2$stateProvince)

# Print the summary
cat("Summary of the Dataset:\n")
cat("-----------------------\n")
cat("Number of Unique Species Recorded:", unique_species, "\n")
cat("Range of Dates: From", start_Date, "to", end_Date, "\n")
cat("Distribution of Recordings Across States:\n")
print(state_distribution)
```
We can know that the dataset has recorded a total of 199 unique species. The recordings span from the date 2017-11-10 to 2021-11-09. And with 229,000 recordings, NSW dominates the dataset, accounting for a significant portion of the total recordings.

## 3. Plot the species discovery curve for Australia

```{r}
# Convert the eventDate column to date format
data_2$eventDate <- as.Date(data_2$eventDate, format="%Y/%m/%d")

# Sort the data by date
data_sorted <- data_2 %>%
  arrange(eventDate) %>%
  group_by(eventDate) %>%
  summarise(unique_species = n_distinct(scientificName)) %>%
  mutate(cumulative_species = cumsum(unique_species))

# Use ggplot2 to plot the species discovery curve for Australia as whole
plot_1 <- ggplot(data_sorted, aes(x = eventDate, y = cumulative_species)) +
  geom_line(color = "blue") +
  labs(title = "Species Discovery Curve for Australia",
       x = "Date",
       y = "Cumulative Number of Species Discovered") +
  theme_minimal()

print(plot_1)

```
```{r}
# Sort and group data by date and state
data_sorted_statewise <- data_2 |>
  arrange(eventDate) |>
  group_by(eventDate, stateProvince) |>
  summarise(unique_species = n_distinct(scientificName), .groups = "drop") |>
  group_by(stateProvince) |>
  mutate(cumulative_species = cumsum(unique_species))

# Use ggplot2 to plot the species discovery curve for each state
plot_2 <- ggplot(data_sorted_statewise, aes(x = eventDate, y = cumulative_species, color = stateProvince)) +
  geom_line() +
  labs(title = "Species Discovery Curve by State",
       x = "Date",
       y = "Cumulative Number of Species Discovered") +
  theme_minimal() 
  
print(plot_2)
```


